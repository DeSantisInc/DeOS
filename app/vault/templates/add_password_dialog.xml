$def with (data=None)
$if 'xml' == data['type']:
  <?xml version="$(data['version'])" encoding="$(data['encoding'])"?>
<ui version="$(data['body']['version'])">
  $for item in data['body']['list']:
    $if 'class' == item['type']:
      <class>$(item['value'])</class>
    $elif 'widget' == item['type']:
      <widget class="$(item['class'])" name="$(item['name'])">
        $for i in item['list']:
          $if 'property' == i['type']:
            <property name="$(i['name'])">
             $for div in i['list']:
                $if 'rect' == div['type']:
                  <rect>
                    <x>$(div['x'])</x>
                    <y>$(div['y'])</y>
                    <width>$(div['width'])</width>
                    <height>$(div['height'])</height>
                  </rect>
                $elif 'string' == div['type']:
                  <string>$(div['value'])</string>
            </property>
          $elif 'layout' == i['type']:
            <layout class="$(i['class'])" name="$(i['name'])">
              $for div in i['list']:
                $if 'item' == div['type']:
                  $for d in div['list']:
                    <item>
                      $if d['type'] in ['widget', 'layout', 'spacer']:
                        $if 'widget' == d['type']: <widget class="$(d['class'])" name="$(d['name'])">
                        $elif 'layout' == d['type']: <layout class="$(d['class'])" name="$(d['name'])">
                        $elif 'spacer' == d['type']: <spacer name="$(d['name'])">
                          $for j in d['list']:
                            $if 'item' == j['type']:
                              $for k in j['list']:
                                $if 'widget' == k['type']:
                                  <item>
                                    <widget class="$(k['class'])" name="$(k['name'])">
                                      $for m in k['list']:
                                        $if 'property' == m['type']:
                                          $if 'stdset' in m:
                                            <property name="$(m['name'])" stdset="$(m['stdset'])">
                                          $else:
                                            <property name="$(m['name'])">
                                          $for n in m['list']:
                                            $if 'string' == n['type']:
                                              $if 'value' in n:
                                                <string>$(n['value'])</string>
                                              $else:
                                                <string/>
                                          </property>
                                    </widget>
                                  </item>
                                $elif 'spacer' == k['type']:
                                  <item>
                                    <spacer name="$(k['name'])">
                                      $for m in k['list']:
                                        $if 'property' == m['type']:
                                          $if 'stdset' in m: <property name="$(m['name'])" stdset="$(m['stdset'])">
                                          $else: <property name="$(m['name'])">
                                          $for n in m['list']:
                                            $if 'enum' == n['type']: <enum>$(n['value'])</enum>
                                            $elif 'size' == n['type']:
                                              <size>
                                                <width>$(n['width'])</width>
                                                <height>$(n['height'])</height>
                                              </size>
                                          </property>
                                    </spacer>
                                  </item>
                                $elif 'property' == k['type']:
                                  <item>
                                    <property name="$(k['name'])">
                                      $for l in k['list']:
                                        $if 'string' == l['type']:
                                          $if 'value' in l:
                                            <string>$(l['value'])</string>
                                          $else:
                                            <string/>
                                        $elif 'number' == l['type']:
                                          <number>$(l['value'])</number>
                                        $elif 'enum' == l['type']:
                                          <enum>$(l['value'])</enum>
                                    </property>
                                  </item>
                            $elif 'property' == j['type']:
                              <property name="$(j['name'])">
                                $for k in j['list']:
                                  $if 'string' == k['type']:
                                    $if 'value' in k:
                                      <string>$(k['value'])</string>
                                    $else:
                                      <string/>
                                  $elif 'size' == k['type']:
                                    <size>
                                      <width>$(k['width'])</width>
                                      <height>$(k['height'])</height>
                                    </size>
                                  $elif 'number' == k['type']:
                                    <number>$(k['value'])</number>
                                  $elif 'enum' == k['type']:
                                    <enum>$(k['value'])</enum>
                                  $elif 'set' == k['type']:
                                    <set>$(k['value'])</set>
                              </property>
                        $if 'widget' == d['type']: </widget>
                        $elif 'layout' == d['type']: </layout>
                        $elif 'spacer' == d['type']: </spacer>
                    </item>
            </layout>
      </widget>
    $elif 'resources' == item['type']:
      <resources/>
    $elif 'connections' == item['type']:
      <connections>
        $for connection in item['list']:
          <connection>
            <sender>$(connection['sender'])</sender>
            <signal>$(connection['signal'])</signal>
            <receiver>$(connection['receiver'])</receiver>
            <slot>$(connection['slot'])</slot>
            <hints>
              $for hint in connection['hints']:
                <hint type="$(hint['type'])">
                  <x>$(hint['x'])</x>
                  <y>$(hint['y'])</y>
                </hint>
            </hints>
          </connection>
      </connections>
</ui>
